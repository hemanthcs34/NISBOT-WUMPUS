const _0x14a061=_0x59e3;(function(_0x2d0bd0,_0x1ff653){const _0x758f6e=_0x59e3,_0x1e9647=_0x2d0bd0();while(!![]){try{const _0x4f01e6=parseInt(_0x758f6e(0x12a))/0x1*(parseInt(_0x758f6e(0x117))/0x2)+-parseInt(_0x758f6e(0x125))/0x3*(parseInt(_0x758f6e(0x123))/0x4)+parseInt(_0x758f6e(0x13b))/0x5+-parseInt(_0x758f6e(0x10e))/0x6*(-parseInt(_0x758f6e(0x126))/0x7)+parseInt(_0x758f6e(0x13d))/0x8+-parseInt(_0x758f6e(0x112))/0x9+-parseInt(_0x758f6e(0x115))/0xa;if(_0x4f01e6===_0x1ff653)break;else _0x1e9647['push'](_0x1e9647['shift']());}catch(_0xc5f3e6){_0x1e9647['push'](_0x1e9647['shift']());}}}(_0xd79d,0x89c64));const express=require('express'),{MongoClient}=require(_0x14a061(0x114)),cors=require(_0x14a061(0x138));function _0x59e3(_0x18f37d,_0x166a93){const _0xd79dd7=_0xd79d();return _0x59e3=function(_0x59e3f5,_0x17f679){_0x59e3f5=_0x59e3f5-0x10d;let _0x7126ba=_0xd79dd7[_0x59e3f5];return _0x7126ba;},_0x59e3(_0x18f37d,_0x166a93);}require(_0x14a061(0x122))[_0x14a061(0x12d)]();const app=express(),port=process['env']['PORT']||0x1f40,uri=process[_0x14a061(0x130)][_0x14a061(0x12f)];if(!uri)throw new Error(_0x14a061(0x11a));const client=new MongoClient(uri);let db;function _0xd79d(){const _0x3d82ab=['2996705hEXaMo','Score\x20updated\x20successfully!','2701120vLtXuS','exit','Invalid\x20name\x20or\x20score\x20provided.','use','6YhCDGd','findOne','json','find','1988577fmVapK','log','mongodb','7674170tcLDVE','Error\x20submitting\x20score:','2LjcNlR','number','listen','MONGO_URI\x20not\x20found\x20in\x20.env\x20file.\x20Please\x20add\x20it.','Failed\x20to\x20connect\x20to\x20MongoDB','Server\x20running\x20at\x20http://localhost:','Error\x20fetching\x20leaderboard','Name\x20is\x20required.','post','body','Server\x20error\x20during\x20authentication.','dotenv','4EDYoWe','collection','2868939vcwuvy','6542823nyJeGX','Error\x20fetching\x20leaderboard:','public','static','637337MCQccu','error','participants','config','Error\x20submitting\x20score','MONGO_URI','env','status','Authentication\x20successful.','findOneAndUpdate','toArray','Error\x20during\x20authentication:','sort','limit','cors','Could\x20not\x20find\x20participant\x20to\x20update\x20score.','/api/leaderboard'];_0xd79d=function(){return _0x3d82ab;};return _0xd79d();}async function connectDB(){const _0x5df798=_0x14a061;try{await client['connect'](),db=client['db']('ieee-game'),console[_0x5df798(0x113)]('Successfully\x20connected\x20to\x20MongoDB\x20Atlas\x20database:\x20ieee-game!');}catch(_0x19a702){console[_0x5df798(0x12b)](_0x5df798(0x11b),_0x19a702),process[_0x5df798(0x13e)](0x1);}}app[_0x14a061(0x10d)](cors()),app[_0x14a061(0x10d)](express[_0x14a061(0x129)](_0x14a061(0x128))),app[_0x14a061(0x10d)](express['json']()),app[_0x14a061(0x11f)]('/api/auth',async(_0x4cbd46,_0x4755d8)=>{const _0x153158=_0x14a061;try{const {name:_0x2d1eeb}=_0x4cbd46[_0x153158(0x120)];if(!_0x2d1eeb)return _0x4755d8[_0x153158(0x131)](0x190)['json']({'message':_0x153158(0x11e)});const _0xe81f71=await db['collection'](_0x153158(0x12c))[_0x153158(0x10f)]({'name':_0x2d1eeb});_0xe81f71?_0x4755d8[_0x153158(0x131)](0xc8)[_0x153158(0x110)]({'message':_0x153158(0x132)}):_0x4755d8[_0x153158(0x131)](0x194)['json']({'message':'Participant\x20not\x20found.\x20Please\x20check\x20your\x20name.'});}catch(_0x2f3d76){console['error'](_0x153158(0x135),_0x2f3d76),_0x4755d8['status'](0x1f4)[_0x153158(0x110)]({'message':_0x153158(0x121)});}}),app['get'](_0x14a061(0x13a),async(_0xdec63b,_0x593aa8)=>{const _0x3d6992=_0x14a061;try{const _0x5c6547=await db['collection']('participants')[_0x3d6992(0x111)]()[_0x3d6992(0x136)]({'totalscore':-0x1})[_0x3d6992(0x137)](0xa)[_0x3d6992(0x134)]();_0x593aa8[_0x3d6992(0x110)](_0x5c6547);}catch(_0x4a4656){console[_0x3d6992(0x12b)](_0x3d6992(0x127),_0x4a4656),_0x593aa8[_0x3d6992(0x131)](0x1f4)[_0x3d6992(0x110)]({'message':_0x3d6992(0x11d)});}}),app['post']('/api/leaderboard',async(_0xa61f8c,_0x5f3ef1)=>{const _0x29f691=_0x14a061;try{const {name:_0x3431ea,score:_0x362903}=_0xa61f8c[_0x29f691(0x120)];if(!_0x3431ea||typeof _0x362903!==_0x29f691(0x118))return _0x5f3ef1['status'](0x190)[_0x29f691(0x110)]({'message':_0x29f691(0x13f)});const _0x2c3fbb=await db[_0x29f691(0x124)](_0x29f691(0x12c))[_0x29f691(0x133)]({'name':_0x3431ea},{'$set':{'totalscore':_0x362903}});_0x2c3fbb?_0x5f3ef1[_0x29f691(0x131)](0xc8)[_0x29f691(0x110)]({'message':_0x29f691(0x13c)}):_0x5f3ef1[_0x29f691(0x131)](0x194)[_0x29f691(0x110)]({'message':_0x29f691(0x139)});}catch(_0x39c78d){console[_0x29f691(0x12b)](_0x29f691(0x116),_0x39c78d),_0x5f3ef1[_0x29f691(0x131)](0x1f4)[_0x29f691(0x110)]({'message':_0x29f691(0x12e)});}}),connectDB()['then'](()=>{const _0x5625f0=_0x14a061;app[_0x5625f0(0x119)](port,()=>{const _0x554f9c=_0x5625f0;console['log'](_0x554f9c(0x11c)+port);});});